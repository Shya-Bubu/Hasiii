<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphical Method Quiz</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --primary-color: #bb86fc;
            --secondary-color: #03dac6;
            --error-color: #cf6679;
            --success-color: #4caf50;
            --border-color: #333;
            --option-bg: #2a2a2a;
            --option-hover: #3a3a3a;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            width: 90%;
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 500;
        }

        .quiz-container {
            display: none;
        }

        .question-container {
            margin-bottom: 2rem;
        }

        .difficulty-tag {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .basic {
            background-color: #4caf50;
            color: white;
        }

        .intermediate {
            background-color: #ff9800;
            color: white;
        }

        .advanced {
            background-color: #f44336;
            color: white;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .option {
            padding: 1rem;
            background-color: var(--option-bg);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--border-color);
        }

        .option:hover {
            background-color: var(--option-hover);
        }

        .option.correct {
            background-color: var(--success-color);
            color: white;
        }

        .option.incorrect {
            background-color: var(--error-color);
            color: white;
        }

        .explanation {
            margin-top: 1rem;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            display: none;
            font-size: 0.95rem;
        }

        .correct-explanation {
            border-left: 4px solid var(--success-color);
        }

        .incorrect-explanation {
            border-left: 4px solid var(--error-color);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #9b6bcc;
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: #000;
        }

        .btn-secondary:hover {
            background-color: #00b9a9;
        }

        .start-screen, .result-screen {
            text-align: center;
            padding: 2rem;
        }

        .result-screen {
            display: none;
        }

        .score {
            font-size: 2rem;
            color: var(--primary-color);
            margin: 1rem 0;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: var(--border-color);
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="start-screen">
            <h1>Graphical Method Quiz</h1>
            <p>Test your understanding of the Graphical Method in Linear Programming with this comprehensive quiz.</p>
            <button class="btn-primary" id="start-btn">Start Quiz</button>
        </div>

        <div class="quiz-container" id="quiz-container">
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
            </div>
            
            <div class="question-container">
                <div class="difficulty-tag" id="difficulty-tag"></div>
                <div class="question-text" id="question-text"></div>
                
                <div class="options-container" id="options-container"></div>
                
                <div class="explanation correct-explanation" id="correct-explanation"></div>
                <div class="explanation incorrect-explanation" id="incorrect-explanation"></div>
            </div>
            
            <div class="navigation">
                <button class="btn-secondary" id="prev-btn" disabled>Previous</button>
                <button class="btn-primary" id="next-btn">Next</button>
            </div>
        </div>

        <div class="result-screen" id="result-screen">
            <h1>Quiz Completed!</h1>
            <div class="score" id="final-score"></div>
            <p id="result-message"></p>
            <button class="btn-primary" id="restart-btn">Restart Quiz</button>
        </div>
    </div>

    <script>
        // Quiz questions data
        const questions = [
            // Basic Questions (1-10)
            {
                difficulty: "basic",
                question: "What is the maximum number of variables that can be handled by the graphical method?",
                options: [
                    "2",
                    "3",
                    "4",
                    "Unlimited"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! The graphical method is limited to problems with exactly two variables.",
                    incorrect: "The graphical method is restricted to two-dimensional space, hence only two variables."
                }
            },
            {
                difficulty: "basic",
                question: "What is a feasible solution in linear programming?",
                options: [
                    "A non-negative solution that satisfies all constraints",
                    "Any solution that maximizes the objective function",
                    "A solution that uses all available resources",
                    "A solution found using the graphical method"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! A feasible solution must satisfy all constraints and be non-negative.",
                    incorrect: "Feasibility is about constraint satisfaction, not necessarily optimality."
                }
            },
            {
                difficulty: "basic",
                question: "What is the collection of all feasible solutions called?",
                options: [
                    "Feasible region",
                    "Optimal set",
                    "Solution space",
                    "Constraint area"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! The feasible region contains all possible solutions that satisfy the constraints.",
                    incorrect: "While related, these terms don't specifically refer to all feasible solutions."
                }
            },
            {
                difficulty: "basic",
                question: "In the graphical method, where is the optimal solution typically found?",
                options: [
                    "At a corner point of the feasible region",
                    "At the center of the feasible region",
                    "At the point closest to the origin",
                    "At the intersection of all constraints"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! The optimal solution is always at a corner point (vertex) of the feasible region.",
                    incorrect: "The fundamental theorem of LP states the optimum occurs at a vertex."
                }
            },
            {
                difficulty: "basic",
                question: "What is a redundant constraint?",
                options: [
                    "A constraint that doesn't affect the feasible region",
                    "A constraint that is always violated",
                    "A constraint that must be included",
                    "A constraint with zero coefficients"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Redundant constraints don't change the feasible region when removed.",
                    incorrect: "Redundancy is about the constraint's effect on the feasible region, not violation."
                }
            },
            {
                difficulty: "basic",
                question: "What type of set is formed by the feasible region in LP?",
                options: [
                    "Convex set",
                    "Concave set",
                    "Disjoint set",
                    "Open set"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! The feasible region in LP is always a convex set.",
                    incorrect: "LP feasible regions have specific mathematical properties (convexity)."
                }
            },
            {
                difficulty: "basic",
                question: "What does an unbounded solution in maximization imply?",
                options: [
                    "The objective function can increase indefinitely",
                    "There are infinite optimal solutions",
                    "The problem has no feasible solutions",
                    "All constraints are equalities"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Unbounded means the objective can grow without limit while satisfying constraints.",
                    incorrect: "Unbounded refers to objective function behavior, not number of solutions."
                }
            },
            {
                difficulty: "basic",
                question: "What indicates multiple optimal solutions in the graphical method?",
                options: [
                    "Objective function parallel to a constraint line",
                    "Feasible region is very large",
                    "All constraints intersect at one point",
                    "Objective function is nonlinear"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! When the objective function has the same slope as a constraint, multiple optima exist.",
                    incorrect: "Multiple solutions occur due to parallel slopes, not region size or nonlinearity."
                }
            },
            {
                difficulty: "basic",
                question: "What is the first step in the graphical method?",
                options: [
                    "Treat each inequality constraint as an equation",
                    "Plot the objective function",
                    "Find all corner points",
                    "Determine the feasible region"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Step 1 is converting inequalities to equations for graphing.",
                    incorrect: "Other steps come after converting constraints to equations."
                }
            },
            {
                difficulty: "basic",
                question: "What does an infeasible solution indicate?",
                options: [
                    "No solution satisfies all constraints simultaneously",
                    "The solution is not optimal",
                    "The graphical method cannot be used",
                    "There are too many constraints"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Infeasibility means the constraints are contradictory with no common solution.",
                    incorrect: "Infeasibility is about constraint satisfaction, not optimality or method limitations."
                }
            },

            // Intermediate Questions (11-20)
            {
                difficulty: "intermediate",
                question: "In the PARLOK Ltd problem, if producing Heaven requires 3 units of M (instead of 2), how would the M constraint change if X=Heaven and Y=Hell?",
                options: [
                    "3X + 3Y ≤ 16",
                    "2X + 3Y ≤ 16",
                    "3X + 2Y ≤ 16",
                    "4X + 3Y ≤ 16"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Heaven would use 3 units of M and Hell uses 3 units, with 16 available.",
                    incorrect: "The constraint coefficients must reflect the changed material requirements."
                }
            },
            {
                difficulty: "intermediate",
                question: "For the diet problem, if the protein requirement increased to 40%, how would the protein constraint change if X=corn and Y=soybean?",
                options: [
                    "0.09X + 0.6Y ≥ 0.4(X+Y)",
                    "0.09X + 0.6Y ≤ 0.4",
                    "0.09X + 0.6Y = 0.4",
                    "X + Y ≥ 0.4"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Protein from corn (0.09X) plus soybean (0.6Y) must be ≥40% of total mix (X+Y).",
                    incorrect: "The constraint must compare protein to total weight, not absolute amounts."
                }
            },
            {
                difficulty: "intermediate",
                question: "What would happen to the feasible region if a constraint was changed from ≤ to =?",
                options: [
                    "It would shrink or stay the same",
                    "It would always expand",
                    "It would become unbounded",
                    "It would disappear completely"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Equality constraints are more restrictive, so feasible region can't grow.",
                    incorrect: "Equality constraints never expand the feasible region, only maintain or reduce it."
                }
            },
            {
                difficulty: "intermediate",
                question: "In the graphical method, how would you identify a minimization problem's optimal solution?",
                options: [
                    "Find the corner point with the smallest objective value",
                    "Find where the objective line exits the feasible region",
                    "Choose the point closest to the origin",
                    "Select the intersection of all constraints"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! For minimization, evaluate all corner points and choose the smallest Z value.",
                    incorrect: "The optimal solution is always at a corner point, not necessarily near the origin."
                }
            },
            {
                difficulty: "intermediate",
                question: "If a feasible region is a single point, what does this imply?",
                options: [
                    "There's exactly one feasible solution",
                    "The problem is infeasible",
                    "The problem has multiple optima",
                    "All constraints are redundant"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! When all constraints intersect at one point, that's the only feasible solution.",
                    incorrect: "A single-point region means exactly one solution exists, not infeasibility."
                }
            },
            {
                difficulty: "intermediate",
                question: "For constraints 2X + Y ≤ 10 and X + 2Y ≤ 10, what is the intersection point?",
                options: [
                    "(10/3, 10/3)",
                    "(5, 0)",
                    "(0, 5)",
                    "(2, 2)"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Solving the system: 2X + Y = 10 and X + 2Y = 10 gives X=Y=10/3.",
                    incorrect: "Plugging in (10/3,10/3) satisfies both equations exactly."
                }
            },
            {
                difficulty: "intermediate",
                question: "In the PARLOK problem, if material N availability increased to 20 units, how would the N constraint change (4X + 2Y ≤ 16)?",
                options: [
                    "4X + 2Y ≤ 20",
                    "4X + 2Y ≥ 20",
                    "2X + 4Y ≤ 20",
                    "X + Y ≤ 20"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Only the right-hand side changes to reflect increased material availability.",
                    incorrect: "The constraint structure remains the same, only the limit increases."
                }
            },
            {
                difficulty: "intermediate",
                question: "What does it mean if the objective function line coincides with a constraint line at optimality?",
                options: [
                    "There are infinite optimal solutions along that edge",
                    "The problem is infeasible",
                    "The solution is unbounded",
                    "That constraint is redundant"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Parallel lines at optimality indicate all points on that edge are optimal.",
                    incorrect: "This situation indicates multiple optima, not infeasibility or unboundedness."
                }
            },
            {
                difficulty: "intermediate",
                question: "If a feasible region is unbounded in a maximization problem, what constraint type is likely missing?",
                options: [
                    "A ≤ type constraint",
                    "A ≥ type constraint",
                    "An equality constraint",
                    "An integer constraint"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Maximization problems need at least one ≤ constraint to bound the region.",
                    incorrect: "≥ constraints in maximization can contribute to unboundedness."
                }
            },
            {
                difficulty: "intermediate",
                question: "For the diet problem, if the fiber constraint changed to 'at most 6%', how would 0.02X + 0.06Y ≤ 0.05(X+Y) change?",
                options: [
                    "0.02X + 0.06Y ≤ 0.06(X+Y)",
                    "0.02X + 0.06Y ≥ 0.06(X+Y)",
                    "0.02X + 0.06Y ≤ 0.06",
                    "0.02X + 0.06Y = 0.06(X+Y)"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! The right-hand side becomes 6% of total mix (X+Y).",
                    incorrect: "The constraint must compare fiber to total weight with the new percentage."
                }
            },

            // Advanced Questions (21-30)
            {
                difficulty: "advanced",
                question: "If a new constraint X + Y ≥ 5 is added to a problem with existing feasible region, what happens?",
                options: [
                    "The feasible region may shrink or become infeasible",
                    "The feasible region will always expand",
                    "The optimal solution will definitely improve",
                    "All previous constraints become redundant"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Adding constraints can only maintain or reduce the feasible region.",
                    incorrect: "New constraints never expand the feasible region and may make it infeasible."
                }
            },
            {
                difficulty: "advanced",
                question: "In the PARLOK problem, if the objective became Maximize Z = 5X + 3Y with original constraints, what's the optimal solution?",
                options: [
                    "X=4, Y=0 (Z=20)",
                    "X=0, Y=8 (Z=24)",
                    "X=2, Y=4 (Z=22)",
                    "X=3, Y=2 (Z=21)"
                ],
                correctAnswer: 2,
                explanation: {
                    correct: "Correct! Testing all corner points: (4,0)=20, (0,8)=24, but (0,8) violates N constraint (4(0)+2(8)=16≤16 is okay, but M constraint 3(0)+3(8)=24>16 is violated). Actual feasible corner points would need reevaluation with new objective.",
                    incorrect: "Must check all corner points for feasibility and optimality with new objective."
                }
            },
            {
                difficulty: "advanced",
                question: "If all constraints in a maximization problem are ≥ type, what can be said about the solution?",
                options: [
                    "The problem is likely unbounded",
                    "There is exactly one optimal solution",
                    "The feasible region is definitely empty",
                    "The graphical method cannot be applied"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Without any ≤ constraints, the feasible region typically extends infinitely.",
                    incorrect: "While problematic, this doesn't necessarily imply infeasibility or method failure."
                }
            },
            {
                difficulty: "advanced",
                question: "What is the minimum number of constraints needed for a bounded feasible region in 2D LP?",
                options: [
                    "3",
                    "2",
                    "1",
                    "4"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! In 2D, you need at least 3 constraints to form a closed feasible region (triangle).",
                    incorrect: "Two constraints can only form an angle, which extends infinitely."
                }
            },
            {
                difficulty: "advanced",
                question: "If the objective function in the diet problem changed to maximize protein, how would the formulation change?",
                options: [
                    "Maximize 0.09X + 0.6Y",
                    "Maximize 0.3X + 0.9Y",
                    "Maximize X + Y",
                    "Minimize 0.09X + 0.6Y"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! The objective would maximize total protein (0.09 from corn + 0.6 from soybean).",
                    incorrect: "Must use the protein coefficients, not costs or simple quantities."
                }
            },
            {
                difficulty: "advanced",
                question: "In the PARLOK problem, if both materials M and N availability doubled, how would the optimal solution likely change?",
                options: [
                    "Production quantities would at least double",
                    "The optimal solution would remain unchanged",
                    "The feasible region would shrink",
                    "The problem would become infeasible"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! With more resources, the company can produce at least twice as much.",
                    incorrect: "Resource increases typically allow for increased production, not reduction."
                }
            },
            {
                difficulty: "advanced",
                question: "If a constraint is added that makes the feasible region empty, what type of solution exists?",
                options: [
                    "Infeasible",
                    "Unbounded",
                    "Multiple optimal",
                    "Unique optimal"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! An empty feasible region means no solution satisfies all constraints.",
                    incorrect: "No solutions exist in this case, not even unbounded ones."
                }
            },
            {
                difficulty: "advanced",
                question: "In the diet problem, if soybean cost increased to $1.20/lb, how would this affect the optimal solution?",
                options: [
                    "The solution would use less soybean meal",
                    "The solution would use more soybean meal",
                    "The protein constraint would become redundant",
                    "The fiber constraint would be violated"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Higher soybean cost would make the optimal solution shift toward cheaper corn.",
                    incorrect: "Cost increases typically reduce usage of that ingredient in the optimal mix."
                }
            },
            {
                difficulty: "advanced",
                question: "What is true about the relationship between the optimal solution and the feasible region's shape?",
                options: [
                    "The optimal solution is always at a vertex of the feasible region",
                    "The optimal solution is at the center of the largest face",
                    "The optimal solution moves as the region expands",
                    "The shape determines whether the solution is integer"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! A fundamental theorem of LP states the optimum occurs at a vertex.",
                    incorrect: "Vertex optimality holds regardless of region shape or size."
                }
            },
            {
                difficulty: "advanced",
                question: "If the PARLOK problem's material N constraint became 4X + 2Y ≥ 16, how would the feasible region change?",
                options: [
                    "It would shift to the opposite side of the constraint line",
                    "It would become unbounded",
                    "It would disappear completely",
                    "It would remain unchanged"
                ],
                correctAnswer: 0,
                explanation: {
                    correct: "Correct! Changing from ≤ to ≥ flips the feasible region to the other side of the line.",
                    incorrect: "The region moves but doesn't necessarily become unbounded or disappear."
                }
            }
        ];

        // Randomize the correct answers
        questions.forEach(q => {
            const correctOption = q.options[q.correctAnswer];
            // Shuffle options
            for (let i = q.options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [q.options[i], q.options[j]] = [q.options[j], q.options[i]];
            }
            // Update correct answer index
            q.correctAnswer = q.options.indexOf(correctOption);
        });

        // Quiz state variables
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = Array(questions.length).fill(null);
        let quizStarted = false;

        // DOM elements
        const startScreen = document.querySelector('.start-screen');
        const quizContainer = document.getElementById('quiz-container');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const difficultyTag = document.getElementById('difficulty-tag');
        const correctExplanation = document.getElementById('correct-explanation');
        const incorrectExplanation = document.getElementById('incorrect-explanation');
        const progressBar = document.getElementById('progress-bar');
        const finalScore = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');

        // Initialize the quiz
        function initQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = Array(questions.length).fill(null);
            loadQuestion();
            updateProgressBar();
            updateNavigationButtons();
        }

        // Load the current question
        function loadQuestion() {
            const question = questions[currentQuestionIndex];
            
            // Set question text and difficulty
            questionText.textContent = question.question;
            difficultyTag.textContent = question.difficulty;
            difficultyTag.className = 'difficulty-tag ' + question.difficulty;
            
            // Clear previous options and explanations
            optionsContainer.innerHTML = '';
            correctExplanation.style.display = 'none';
            incorrectExplanation.style.display = 'none';
            
            // Create options
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.textContent = option;
                optionElement.dataset.index = index;
                
                // Highlight if already answered
                if (userAnswers[currentQuestionIndex] !== null) {
                    if (index === question.correctAnswer) {
                        optionElement.classList.add('correct');
                    } else if (index === userAnswers[currentQuestionIndex] && index !== question.correctAnswer) {
                        optionElement.classList.add('incorrect');
                    }
                }
                
                optionElement.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
            
            // Show explanations if already answered
            if (userAnswers[currentQuestionIndex] !== null) {
                showExplanations();
            }
        }

        // Handle option selection
        function selectOption(optionIndex) {
            // Only allow selection if not already answered
            if (userAnswers[currentQuestionIndex] !== null) return;
            
            const question = questions[currentQuestionIndex];
            userAnswers[currentQuestionIndex] = optionIndex;
            
            // Update score if correct
            if (optionIndex === question.correctAnswer) {
                score++;
            }
            
            // Highlight selected option
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                if (index === optionIndex) {
                    option.classList.add(index === question.correctAnswer ? 'correct' : 'incorrect');
                }
                if (index === question.correctAnswer && index !== optionIndex) {
                    option.classList.add('correct');
                }
            });
            
            // Show explanations
            showExplanations();
            updateProgressBar();
            updateNavigationButtons();
        }

        // Show explanations for the current question
        function showExplanations() {
            const question = questions[currentQuestionIndex];
            const userAnswer = userAnswers[currentQuestionIndex];
            
            correctExplanation.textContent = question.explanation.correct;
            correctExplanation.style.display = 'block';
            
            if (userAnswer !== question.correctAnswer) {
                incorrectExplanation.textContent = question.explanation.incorrect;
                incorrectExplanation.style.display = 'block';
            }
        }

        // Update navigation buttons state
        function updateNavigationButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'Finish';
            } else {
                nextBtn.textContent = 'Next';
            }
        }

        // Update progress bar
        function updateProgressBar() {
            const answeredCount = userAnswers.filter(answer => answer !== null).length;
            const progress = (answeredCount / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Show quiz results
        function showResults() {
            const percentage = Math.round((score / questions.length) * 100);
            finalScore.textContent = `${score}/${questions.length} (${percentage}%)`;
            
            if (percentage >= 80) {
                resultMessage.textContent = 'Graphical Method Expert! You have mastered LP graphical solutions.';
            } else if (percentage >= 60) {
                resultMessage.textContent = 'Strong performance! You understand most concepts but could review some areas.';
            } else if (percentage >= 40) {
                resultMessage.textContent = 'Good effort! Focus on the explanations to improve your knowledge.';
            } else {
                resultMessage.textContent = 'Keep studying! Review Chapter 3 materials and try again.';
            }
            
            quizContainer.style.display = 'none';
            resultScreen.style.display = 'block';
        }

        // Event listeners
        startBtn.addEventListener('click', () => {
            startScreen.style.display = 'none';
            quizContainer.style.display = 'block';
            quizStarted = true;
            initQuiz();
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
                updateNavigationButtons();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
                updateNavigationButtons();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', () => {
            resultScreen.style.display = 'none';
            initQuiz();
        });

        // Initialize
        if (!quizStarted) {
            startScreen.style.display = 'block';
            quizContainer.style.display = 'none';
            resultScreen.style.display = 'none';
        }
    </script>
</body>
</html>